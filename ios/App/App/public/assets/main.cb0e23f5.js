(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();const ft="modulepreload",gt=function(e){return"/"+e},ke={},ye=function(t,n,o){if(!n||n.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(n.map(r=>{if(r=gt(r),r in ke)return;ke[r]=!0;const a=r.endsWith(".css"),i=a?'[rel="stylesheet"]':"";if(!!o)for(let u=s.length-1;u>=0;u--){const d=s[u];if(d.href===r&&(!a||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${i}`))return;const l=document.createElement("link");if(l.rel=a?"stylesheet":ft,a||(l.as="script",l.crossOrigin=""),l.href=r,document.head.appendChild(l),a)return new Promise((u,d)=>{l.addEventListener("load",u),l.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t()).catch(r=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r})};/*! Capacitor: https://capacitorjs.com/ - MIT License */const pt=e=>{const t=new Map;t.set("web",{name:"web"});const n=e.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t},o=(r,a)=>{n.platforms.set(r,a)},s=r=>{n.platforms.has(r)&&(n.currentPlatform=n.platforms.get(r))};return n.addPlatform=o,n.setPlatform=s,n},ht=e=>e.CapacitorPlatforms=pt(e),De=ht(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});De.addPlatform;De.setPlatform;var K;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(K||(K={}));class me extends Error{constructor(t,n,o){super(t),this.message=t,this.code=n,this.data=o}}const yt=e=>{var t,n;return e!=null&&e.androidBridge?"android":!((n=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},wt=e=>{var t,n,o,s,r;const a=e.CapacitorCustomPlatform||null,i=e.Capacitor||{},c=i.Plugins=i.Plugins||{},l=e.CapacitorPlatforms,u=()=>a!==null?a.name:yt(e),d=((t=l==null?void 0:l.currentPlatform)===null||t===void 0?void 0:t.getPlatform)||u,p=()=>d()!=="web",F=((n=l==null?void 0:l.currentPlatform)===null||n===void 0?void 0:n.isNativePlatform)||p,J=f=>{const g=ce.get(f);return!!(g!=null&&g.platforms.has(d())||Ee(f))},rt=((o=l==null?void 0:l.currentPlatform)===null||o===void 0?void 0:o.isPluginAvailable)||J,st=f=>{var g;return(g=i.PluginHeaders)===null||g===void 0?void 0:g.find(G=>G.name===f)},Ee=((s=l==null?void 0:l.currentPlatform)===null||s===void 0?void 0:s.getPluginHeader)||st,at=f=>e.console.error(f),it=(f,g,G)=>Promise.reject(`${G} does not have an implementation of "${g}".`),ce=new Map,lt=(f,g={})=>{const G=ce.get(f);if(G)return console.warn(`Capacitor plugin "${f}" already registered. Cannot register plugins twice.`),G.proxy;const _=d(),z=Ee(f);let I;const dt=async()=>(!I&&_ in g?I=typeof g[_]=="function"?I=await g[_]():I=g[_]:a!==null&&!I&&"web"in g&&(I=typeof g.web=="function"?I=await g.web():I=g.web),I),ut=(h,w)=>{var L,M;if(z){const A=z==null?void 0:z.methods.find(E=>w===E.name);if(A)return A.rtype==="promise"?E=>i.nativePromise(f,w.toString(),E):(E,ne)=>i.nativeCallback(f,w.toString(),E,ne);if(h)return(L=h[w])===null||L===void 0?void 0:L.bind(h)}else{if(h)return(M=h[w])===null||M===void 0?void 0:M.bind(h);throw new me(`"${f}" plugin is not implemented on ${_}`,K.Unimplemented)}},de=h=>{let w;const L=(...M)=>{const A=dt().then(E=>{const ne=ut(E,h);if(ne){const oe=ne(...M);return w=oe==null?void 0:oe.remove,oe}else throw new me(`"${f}.${h}()" is not implemented on ${_}`,K.Unimplemented)});return h==="addListener"&&(A.remove=async()=>w()),A};return L.toString=()=>`${h.toString()}() { [capacitor code] }`,Object.defineProperty(L,"name",{value:h,writable:!1,configurable:!1}),L},Pe=de("addListener"),Le=de("removeListener"),mt=(h,w)=>{const L=Pe({eventName:h},w),M=async()=>{const E=await L;Le({eventName:h,callbackId:E},w)},A=new Promise(E=>L.then(()=>E({remove:M})));return A.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await M()},A},ue=new Proxy({},{get(h,w){switch(w){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return z?mt:Pe;case"removeListener":return Le;default:return de(w)}}});return c[f]=ue,ce.set(f,{name:f,proxy:ue,platforms:new Set([...Object.keys(g),...z?[_]:[]])}),ue},ct=((r=l==null?void 0:l.currentPlatform)===null||r===void 0?void 0:r.registerPlugin)||lt;return i.convertFileSrc||(i.convertFileSrc=f=>f),i.getPlatform=d,i.handleError=at,i.isNativePlatform=F,i.isPluginAvailable=rt,i.pluginMethodNoop=it,i.registerPlugin=ct,i.Exception=me,i.DEBUG=!!i.DEBUG,i.isLoggingEnabled=!!i.isLoggingEnabled,i.platform=i.getPlatform(),i.isNative=i.isNativePlatform(),i},vt=e=>e.Capacitor=wt(e),Y=vt(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),te=Y.registerPlugin;Y.Plugins;class je{constructor(t){this.listeners={},this.retainedEventArguments={},this.windowListeners={},t&&(console.warn(`Capacitor WebPlugin "${t.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=t)}addListener(t,n){let o=!1;this.listeners[t]||(this.listeners[t]=[],o=!0),this.listeners[t].push(n);const r=this.windowListeners[t];r&&!r.registered&&this.addWindowListener(r),o&&this.sendRetainedArgumentsForEvent(t);const a=async()=>this.removeListener(t,n);return Promise.resolve({remove:a})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,n,o){const s=this.listeners[t];if(!s){if(o){let r=this.retainedEventArguments[t];r||(r=[]),r.push(n),this.retainedEventArguments[t]=r}return}s.forEach(r=>r(n))}hasListeners(t){return!!this.listeners[t].length}registerWindowListener(t,n){this.windowListeners[n]={registered:!1,windowEventName:t,pluginEventName:n,handler:o=>{this.notifyListeners(n,o)}}}unimplemented(t="not implemented"){return new Y.Exception(t,K.Unimplemented)}unavailable(t="not available"){return new Y.Exception(t,K.Unavailable)}async removeListener(t,n){const o=this.listeners[t];if(!o)return;const s=o.indexOf(n);this.listeners[t].splice(s,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const n=this.retainedEventArguments[t];n&&(delete this.retainedEventArguments[t],n.forEach(o=>{this.notifyListeners(t,o)}))}}const Ie=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Se=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class bt extends je{async getCookies(){const t=document.cookie,n={};return t.split(";").forEach(o=>{if(o.length<=0)return;let[s,r]=o.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=Se(s).trim(),r=Se(r).trim(),n[s]=r}),n}async setCookie(t){try{const n=Ie(t.key),o=Ie(t.value),s=`; expires=${(t.expires||"").replace("expires=","")}`,r=(t.path||"/").replace("path=",""),a=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${n}=${o||""}${s}; path=${r}; ${a};`}catch(n){return Promise.reject(n)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const n of t)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}te("CapacitorCookies",{web:()=>new bt});const Ct=async e=>new Promise((t,n)=>{const o=new FileReader;o.onload=()=>{const s=o.result;t(s.indexOf(",")>=0?s.split(",")[1]:s)},o.onerror=s=>n(s),o.readAsDataURL(e)}),Et=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(s=>s.toLocaleLowerCase()).reduce((s,r,a)=>(s[r]=e[t[a]],s),{})},Pt=(e,t=!0)=>e?Object.entries(e).reduce((o,s)=>{const[r,a]=s;let i,c;return Array.isArray(a)?(c="",a.forEach(l=>{i=t?encodeURIComponent(l):l,c+=`${r}=${i}&`}),c.slice(0,-1)):(i=t?encodeURIComponent(a):a,c=`${r}=${i}`),`${o}&${c}`},"").substr(1):null,Lt=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),s=Et(e.headers)["content-type"]||"";if(typeof e.data=="string")n.body=e.data;else if(s.includes("application/x-www-form-urlencoded")){const r=new URLSearchParams;for(const[a,i]of Object.entries(e.data||{}))r.set(a,i);n.body=r.toString()}else if(s.includes("multipart/form-data")||e.data instanceof FormData){const r=new FormData;if(e.data instanceof FormData)e.data.forEach((i,c)=>{r.append(c,i)});else for(const i of Object.keys(e.data))r.append(i,e.data[i]);n.body=r;const a=new Headers(n.headers);a.delete("content-type"),n.headers=a}else(s.includes("application/json")||typeof e.data=="object")&&(n.body=JSON.stringify(e.data));return n};class kt extends je{async request(t){const n=Lt(t,t.webFetchExtra),o=Pt(t.params,t.shouldEncodeUrlParams),s=o?`${t.url}?${o}`:t.url,r=await fetch(s,n),a=r.headers.get("content-type")||"";let{responseType:i="text"}=r.ok?t:{};a.includes("application/json")&&(i="json");let c,l;switch(i){case"arraybuffer":case"blob":l=await r.blob(),c=await Ct(l);break;case"json":c=await r.json();break;case"document":case"text":default:c=await r.text()}const u={};return r.headers.forEach((d,p)=>{u[p]=d}),{data:c,headers:u,status:r.status,url:r.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}te("CapacitorHttp",{web:()=>new kt});const T=te("Preferences",{web:()=>ye(()=>import("./web.14dd506c.js"),[]).then(e=>new e.PreferencesWeb)}),m={setItem:async(e,t)=>{await T.set({key:e,value:JSON.stringify(t)})},getItem:async e=>{const{value:t}=await T.get({key:e});return t?JSON.parse(t):null},getNumber:async(e,t=0)=>{const n=await m.getItem(e);return n!==null?Number(n):t},removeItem:async e=>{await T.remove({key:e})},clear:async()=>{await T.clear()}};async function It(){if((await T.get({key:"storageMigrationComplete"})).value==="true"){console.log("Storage migration already completed");return}if(Y.getPlatform()==="web"){console.log("Starting storage migration");const t=["points","selectedDifficulty","wonCards","selectedCategory","cardRevealProgress","plinkoProgress"];for(const n of t){const o=localStorage.getItem(n);o!==null&&(await T.set({key:n,value:o}),console.log(`Migrated ${n}: ${o}`))}for(const n of t)localStorage.getItem(n)!==null&&(localStorage.removeItem(n),console.log(`Removed old key from localStorage: ${n}`));await T.set({key:"storageMigrationComplete",value:"true"}),console.log("Storage migration and cleanup completed")}else console.log("Not running on web, skipping storage migration")}let Q=null;async function He(){try{Object.keys(C).length===0&&await Ce(),await St(),xt(),U()}catch(e){console.error("Error initializing home screen:",e)}}async function St(){const e=document.getElementById("category-container");e.innerHTML="";let t=await m.getItem("wonCards");t||(t=[]);for(const[n,o]of Object.entries(C)){const s=document.createElement("div");s.className="category-tile";const r=document.createElement("div");r.className="category-cards",r.addEventListener("touchstart",$t,{passive:!1}),r.addEventListener("touchmove",Mt,{passive:!1}),r.addEventListener("touchend",Be,{passive:!1}),r.addEventListener("touchcancel",Be,{passive:!1}),o.cards.slice(0,10).forEach(c=>{const l=document.createElement("div");l.className="card-wrapper";const u=document.createElement("img");u.src=`card-images/${c}`,u.alt="Card",u.draggable=!1;const d=document.createElement("div");d.className="card-overlay",l.appendChild(u),l.appendChild(d),t.includes(c)?l.classList.add("won-card"):l.classList.add("not-won-card"),r.appendChild(l)});const a=document.createElement("h3");a.className="category-title",a.textContent=n;const i=document.createElement("button");i.className="play-button",i.textContent="Play",i.onclick=()=>startGame(n),s.appendChild(r),s.appendChild(a),s.appendChild(i),e.appendChild(s)}}async function xt(){const e=document.getElementById("difficulty-dropdown");e.style.display="none",e.removeEventListener("change",xe),e.addEventListener("change",xe);const t=await m.getItem("selectedDifficulty");t?e.value=t:(e.value="hard",await m.setItem("selectedDifficulty","hard")),e.style.display=""}async function xe(e){const t=e.target.value;await m.setItem("selectedDifficulty",t),Bt(t)}function Bt(e){const n={easy:"easy.m4a",hard:"hard.m4a",superhard:"superhard.m4a",superduperhard:"superduperhard.m4a"}[e];Q&&(Q.pause(),Q.currentTime=0),n&&(Q=new Audio(`game-sounds/${n}`),Q.play().catch(o=>console.error("Error playing audio:",o)))}function $t(e){e.preventDefault();const t=e.touches[0];t.clientX,t.clientY,Ue(e)}function Mt(e){e.preventDefault(),Ue(e)}function Be(e){e.preventDefault(),e.currentTarget.querySelectorAll(".card-wrapper").forEach(o=>o.classList.remove("touch-active"))}function Ue(e){const t=e.touches[0];e.currentTarget.querySelectorAll(".card-wrapper").forEach(s=>{const r=s.getBoundingClientRect();t.clientX>=r.left&&t.clientX<=r.right&&t.clientY>=r.top&&t.clientY<=r.bottom?s.classList.add("touch-active"):s.classList.remove("touch-active")})}function _e(e,t){const n=document.getElementById("show-won-card-screen"),o=document.getElementById("won-card-image"),s=document.querySelector(".won-card-image-container"),r=document.getElementById("return-home-button");o.src=`card-images/${e}`,j("show-won-card-screen"),setTimeout(()=>{n.classList.add("visible"),s.classList.add("animate-entrance"),At(s),setTimeout(()=>{r.classList.add("visible")},500)},50),r.onclick=()=>{qe(),j("home-screen")}}function At(e){for(let n=0;n<20;n++){const o=document.createElement("div");o.classList.add("sparkle");const s=Math.random()*100+"%",r=Math.random()*100+"%",a=Math.random()*1e3+"ms",i=Math.random()*1e3+1e3+"ms";o.style.left=s,o.style.top=r,o.style.animation=`sparkle ${i} ${a} infinite`,e.appendChild(o)}}function qe(){const e=document.getElementById("show-won-card-screen"),t=document.querySelector(".won-card-image-container"),n=document.getElementById("return-home-button");e.classList.remove("visible"),t.classList.remove("animate-entrance"),n.classList.remove("visible"),t.querySelectorAll(".sparkle").forEach(s=>s.remove())}const $e=new Audio("game-sounds/need-points.m4a");function we(){const e=document.querySelectorAll(".points-display");e.length>0?e.forEach(t=>{t.classList.add("decrement"),setTimeout(()=>{t.classList.remove("decrement")},700)}):console.error("Points display not found")}function Rt(){const e=document.querySelectorAll(".points-display");e.length>0?e.forEach(t=>{t.classList.add("increment"),setTimeout(()=>{t.classList.remove("increment")},700)}):console.error("Points display not found")}function Fe(e){const t=document.getElementById(e);t?(t.classList.add("show"),setTimeout(()=>{t.classList.remove("show")},1500),Wt()):console.error(`Message element with id '${e}' not found`)}function ae(){return v>0}function Ge(e,t,n,o){const s=document.getElementById(o);if(!s){console.error(`Card image element with id '${o}' not found.`);return}if(!e){console.error("No card selected. Unable to update card image.");return}const r=`card-images/${e}`;console.log(`Setting ${n} card image src to:`,r),s.src=r,s.alt=`Card from ${t}`,s.onload=()=>{console.log("Image loaded successfully")},s.onerror=()=>{console.error("Failed to load image:",r),s.src="path/to/default-or-error-image.png",s.alt="Error loading card image"}}function ze(e){try{if(console.log("Selecting random card from category data:",e),!e||!e.cards||e.cards.length===0)return console.error("Invalid category data or no cards available"),null;const t=e.cards;console.log("Available cards:",t);const n=t[Math.floor(Math.random()*t.length)];return console.log("Selected card:",n),n}catch(t){return console.error("Error selecting random card:",t),null}}async function Ve(e){let t=await m.getItem("wonCards");t||(t=[]),t.includes(e)||(t.push(e),await m.setItem("wonCards",t))}async function X(e,t){await m.setItem(`${e}Progress`,t),console.log(`${e} progress saved:`,t)}function Wt(){$e.currentTime=0,$e.play().catch(e=>console.error("Error playing audio:",e))}var ee;(function(e){e.Heavy="HEAVY",e.Medium="MEDIUM",e.Light="LIGHT"})(ee||(ee={}));var Me;(function(e){e.Success="SUCCESS",e.Warning="WARNING",e.Error="ERROR"})(Me||(Me={}));const ve=te("Haptics",{web:()=>ye(()=>import("./web.4df06873.js"),[]).then(e=>new e.HapticsWeb)});let k=0;const Ke=16;let Ae="",N="",W=!0,H=!1;async function fe(e,t){const n=await m.getNumber("points",0);console.log("Initializing Card Reveal with",n,"points and category:",e),Ae=e;const o=await m.getItem("cardRevealProgress");o&&!o.isCardFullyRevealed?(console.log("Found saved progress:",o),k=o.revealedBlocks,N=o.currentCard,H=!1,W=o.needNewCard):(console.log("No saved progress or card was fully revealed. Starting new card."),k=0,H=!1,W=!0),W&&(N=ze(t),W=!1,X("cardReveal",{revealedBlocks:k,currentCard:N,isCardFullyRevealed:H,needNewCard:W}));const s=document.getElementById("card-board");s.style.display="grid",s.innerHTML="",Ge(N,Ae,"cardReveal","card-reveal-image"),Ot(),U(),Tt()}function Ot(){const e=document.getElementById("card-board");e.innerHTML="";for(let t=0;t<Ke;t++){const n=document.createElement("div");n.className="card-block",n.dataset.index=t,n.addEventListener("click",function(){Ye(this,this.dataset.index)}),e.appendChild(n)}}function Tt(){console.log("Applying progress, revealed blocks:",k);const e=document.querySelectorAll(".card-block");if(H)e.forEach(t=>t.style.display="none");else for(let t=0;t<k;t++)e[t]&&(e[t].style.opacity="0")}async function Ye(e,t){if(ae()&&e.style.opacity!=="0"){e.style.opacity="0",le(-1),we(),k++,X("cardReveal",{revealedBlocks:k,currentCard:N,isCardFullyRevealed:H,needNewCard:W}),Nt(),console.log("Block revealed, current state:",{totalPoints:v,revealedBlocks:k});try{await ve.impact({style:ee.Heavy})}catch(n){console.error("Error triggering haptics:",n)}}else ae()||Fe("card-reveal-out-of-points-message")}function Nt(){k===Ke&&!H&&(H=!0,W=!0,Ve(N),X("cardReveal",{revealedBlocks:k,currentCard:N,isCardFullyRevealed:H,needNewCard:W}),_e(N))}let $=0,Re="",B="",O=!0;const Xe=25;let se=!1,y=400,V=600,S=40;const R=5;async function ge(e,t){const n=await m.getNumber("points",0);console.log("Initializing Plinko Game with",n,"points and category:",e),Re=e;const o=await m.getItem("plinkoProgress");o?(console.log("Found saved progress:",o),$=o.progressBarFill,B=o.currentPlinkoCard,O=o.needNewCard):(console.log("No saved progress. Starting new game."),$=0,O=!0),O&&(B=ze(t),O=!1,X("plinko",{progressBarFill:$,currentPlinkoCard:B,needNewCard:O}));const s=document.getElementById("plinko-board");y=s.clientWidth,V=s.clientHeight,S=y/8,We(),Je(),Ge(B,Re,"plinko","plinko-card-image"),U();const r=document.getElementById("plinko-game-container");r.style.display="block",s.addEventListener("click",Dt),window.addEventListener("resize",_t(()=>{y=s.clientWidth,V=s.clientHeight,S=Math.min(y,V)/8,We()},250))}function We(){const e=document.getElementById("plinko-board");e.innerHTML="",y=e.clientWidth,V=e.clientHeight;const t=10,n=Math.floor(y/S)-1;S=y/(n+1);for(let a=0;a<t;a++){const c=a%2===0?n-1:n,l=(c-1)*S,u=(y-l)/2;for(let d=0;d<c;d++){const p=document.createElement("div");p.className="peg";const F=u+d*S,J=S+a*S;p.style.left=`${F}px`,p.style.top=`${J}px`,e.appendChild(p)}}const o=[1,2,5,10,5,2,1],s=y/o.length;o.forEach((a,i)=>{const c=document.createElement("div");c.className="slot";const l=document.createElement("span");l.className="slot-number",l.textContent=a,c.appendChild(l),c.style.left=`${i*s}px`,c.style.width=`${s}px`,c.style.bottom="0",e.appendChild(c)});const r=document.createElement("div");r.id="ball",e.appendChild(r),console.log(`Board dimensions: ${y}x${V}, Peg spacing: ${S}`)}function Je(){const e=document.getElementById("plinko-progress-bar"),t=$/Xe*100;e.style.width=`${t}%`}function Dt(e){if(!se)if(ae()){const n=document.getElementById("plinko-board").getBoundingClientRect(),o=e.clientX-n.left;jt(Math.max(R,Math.min(y-R,o)))}else Fe("plinko-out-of-points-message")}function jt(e){if(se||!ae()){console.log("Cannot drop ball: animation in progress or not enough points");return}se=!0,le(-1),we(),U();const t=document.getElementById("ball");t.style.display="block",t.style.left=`${e}px`,t.style.top="0";let n={x:e,y:0},o={x:0,y:0};async function s(){if(n.y<V-20){o.y+=.6,n.x+=o.x,n.y+=o.y,o.x+=(Math.random()-.5)*.3,o.y+=(Math.random()-.5)*.3;for(const r of document.querySelectorAll(".peg")){const a=r.getBoundingClientRect(),i=t.getBoundingClientRect(),c=(a.left+a.right)/2-(i.left+i.right)/2,l=(a.top+a.bottom)/2-(i.top+i.bottom)/2;if(Math.sqrt(c*c+l*l)<R+10){const d=Math.atan2(l,c),p=8+Math.random()*4;o.x=-Math.cos(d)*p,o.y=-Math.sin(d)*p;const F=(Math.random()-.5)*.5;o.x+=Math.cos(F),o.y+=Math.sin(F),r.style.animation="none",r.offsetHeight,r.style.animation="pegPulse 0.3s ease-out";try{await ve.impact({style:ee.Light})}catch(J){console.error("Error triggering haptics:",J)}}}(n.x<R||n.x>y-R)&&(o.x=-o.x*.8,n.x=n.x<R?R:y-R),t.style.left=`${n.x}px`,t.style.top=`${n.y}px`,requestAnimationFrame(s)}else{const r=Ht(n.x);$+=r,Je(),X("plinko",{progressBarFill:$,currentPlinkoCard:B,needNewCard:O});const a=Math.floor(n.x/(y/7)),c=document.querySelectorAll(".slot")[a].querySelector(".slot-number");c.classList.add("animate-slot"),setTimeout(()=>{c.classList.remove("animate-slot")},1e3),$>=Xe&&Ut(),t.style.display="none",se=!1}}s()}function Ht(e){const t=y/7,n=Math.floor(e/t);return[1,2,5,10,5,2,1][Math.min(n,6)]}function Ut(){console.log("Card revealed:",B),Ve(B),$=0,O=!0,X("plinko",{progressBarFill:$,currentPlinkoCard:B,needNewCard:O}),setTimeout(()=>{_e(B)},500)}function _t(e,t){let n;return function(...s){const r=()=>{clearTimeout(n),e(...s)};clearTimeout(n),n=setTimeout(r,t)}}function qt(){function e(t,n){return Math.random()*(n-t)+t}confetti({angle:e(55,125),spread:e(50,70),particleCount:e(50,100),origin:{y:.6},scalar:2,shapes:["emoji"],shapeOptions:{emoji:{value:["🦄","🌈"]}}})}let D={};const pe=[];let b={};const Qe=10;let q=0,Z=2,ie=0,re=!1,P="Simple Words",x="Hard";const Ze=[new Audio("game-sounds/nice.m4a"),new Audio("game-sounds/oo-nice.m4a"),new Audio("game-sounds/good-job.m4a"),new Audio("game-sounds/great.m4a")],et=[new Audio("game-sounds/try-again.m4a"),new Audio("game-sounds/oops.m4a")];async function Ft(){try{return await(await fetch("letter-sounds.json")).json()}catch(e){return console.error("Error fetching letter sounds:",e),null}}async function Gt(){if(P=await m.getItem("selectedCategory"),x=await m.getItem("selectedDifficulty"),console.log("Selected Category:",P),console.log("Selected Difficulty:",x),!P||!x){console.error("Category or difficulty not selected");return}Xt(),en();try{if(D=await Ce(),!D)throw new Error("Failed to fetch word categories");if(console.log("Fetched word categories:",D),b=await Ft(),!b)throw new Error("Failed to fetch letter sounds");console.log("Fetched letter sounds:",b)}catch(t){console.error("Error loading data:",t);return}x==="easy"?Z=2:x==="hard"?Z=4:x==="superhard"?Z=6:x==="superduperhard"&&(Z=8);const e=D[P].words;if(!Array.isArray(e)||e.length===0){console.error("No words found for the selected category");return}be(e),pe.length=0;for(let t=0;t<Math.min(Qe,e.length);t++){const n=e[t],o={word:n.toUpperCase(),image:`./images/${n}.jpg`};pe.push(o)}ie=0,q=0,tt(),document.getElementById("level-container").style.display="block"}function tt(){const e=pe[ie],t=document.getElementById("level-container"),n=document.getElementById("letter-container");t.innerHTML="",n.innerHTML="",Zt();const o=document.createElement("div");o.id="confetti-container",t.appendChild(o);const s=document.createElement("div");s.id="image-container",t.appendChild(s);const r=e.word.toLowerCase(),a=zt(r),i=Vt(a);a.forEach((u,d)=>{const p=document.createElement("button");p.innerText=u.toUpperCase(),p.className="letter-button",i.includes(d)?p.classList.add("disabled"):p.onclick=()=>nt(u),n.appendChild(p)}),n.scrollWidth>n.clientWidth?(n.style.justifyContent="flex-start",n.style.paddingLeft="20px"):n.style.justifyContent="center",Ne(),n.addEventListener("scroll",Ne);const c=[...Kt(e)],l=be(c);for(const u of l){const d=document.createElement("img");d.src=u,d.alt="Word Image",d.classList.add("image-option"),d.onclick=()=>ot(d,e),s.appendChild(d)}}function zt(e){const t=[];let n=0;for(;n<e.length;){let o=e[n],s=n+1;if(b&&b.letterCombinations){for(let r of Object.keys(b.letterCombinations))if(e.slice(n).startsWith(r)){o=r,s=n+r.length;break}}t.push(o),n=s}return t}function Vt(e){const t=e.length;let n=[];if(x==="superhard"){const o=t<5?1:2;for(;n.length<o;){const s=Math.floor(Math.random()*t);n.includes(s)||n.push(s)}}else if(x==="superduperhard"){const o=t<5?1:2,s=t-o,r=Array.from({length:t},(a,i)=>i);for(let a=0;a<s;a++){const i=Math.floor(Math.random()*r.length);n.push(r[i]),r.splice(i,1)}}return n}function be(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}function nt(e){let t;if(e=e.toLowerCase(),b.letterCombinations&&b.letterCombinations[e])t=b.letterCombinations[e];else if(b.singleLetters&&b.singleLetters[e])t=b.singleLetters[e];else{console.warn(`No sound file found for: ${e}`);return}new Audio(`./letter-sounds/${t}`).play().catch(o=>console.error("Error playing audio:",o))}function Kt(e){if(!D||!D[P]||!Array.isArray(D[P].words))return console.error("Invalid word data structure"),[];const t=[],n=D[P].words,o=n.findIndex(a=>a.trim().toLowerCase()===e.word.toLowerCase().trim());if(o===-1)return console.error("Current word not found in category words"),[];t.push(e.image);const s=n.slice(0);s.splice(o,1);const r=be(s);for(;t.length<Z&&r.length>0;){const a=r.pop();if(a){const i=`./images/${encodeURIComponent(a)}.jpg`;t.includes(i)||t.push(i)}}return t}async function ot(e,t){if(re||e.classList.contains("disabled"))return;re=!0;const n=t.word.toLowerCase(),o=e.src.toLowerCase(),s=decodeURIComponent(o.substring(o.lastIndexOf("/")+1,o.lastIndexOf(".")));try{await ve.impact({style:ee.Medium})}catch(r){console.error("Error triggering haptics:",r)}s===n?(Oe(!0),Te(Ze),qt(),setTimeout(()=>{Jt(),re=!1},1e3)):(Oe(!1),Te(et),e.classList.add("disabled"),re=!1)}function Oe(e){e?(q++,le(1),Rt()):q>0&&(q--,le(-1),we()),console.log("Current Game Points:",q),Yt()}function Yt(){const e=document.getElementById("coin-container");e.innerHTML="";for(let t=0;t<q;t++){const n=document.createElement("img");n.src="icons/coin.png",n.alt="Coin",n.classList.add("coin-icon"),e.appendChild(n)}}function Xt(){const e=document.getElementById("total-points-value");e&&(e.textContent=v)}function Jt(){ie++,ie<Qe?tt():Qt()}function Qt(){const e=document.getElementById("results-message");e.textContent=`You earned ${q} points!`;const t=document.getElementById("home-button"),n=document.getElementById("card-reveal-button"),o=document.getElementById("plinko-button");t.onclick=()=>{j("home-screen"),U()},n.onclick=()=>{j("card-reveal-screen"),fe(P,C[P])},o.onclick=()=>{j("plinko-screen"),ge(P,C[P])},j("results-screen")}function Te(e){const t=Math.floor(Math.random()*e.length),n=e[t];n.currentTime=0,n.play().catch(o=>console.error("Error playing audio:",o))}function Zt(){document.querySelectorAll(".image-option.disabled").forEach(t=>t.classList.remove("disabled"))}function en(){[...Ze,...et].forEach(e=>{e.load()})}function Ne(){const e=document.getElementById("letter-container"),n=e.querySelector(".letter-button").getBoundingClientRect();let o=document.querySelector(".letter-fade");if(!o){const s=document.createElement("div");s.className="letter-fade",e.appendChild(s),o=s}if(o.style.top=`${n.top}px`,o.style.height=`${n.height}px`,e.scrollWidth>e.clientWidth){const s=e.scrollWidth-e.clientWidth;Math.ceil(e.scrollLeft)<s?o.style.opacity="1":o.style.opacity="0"}else o.style.opacity="0"}const he=te("SplashScreen",{web:()=>ye(()=>import("./web.45e0ee71.js"),[]).then(e=>new e.SplashScreenWeb)});let v=0,C={};async function j(e){if(console.log("Switching to screen:",e),v=await m.getNumber("points",0),document.getElementById("home-screen").style.display="none",document.getElementById("game-screen").style.display="none",document.getElementById("results-screen").style.display="none",document.getElementById("card-reveal-screen").style.display="none",document.getElementById("plinko-screen").style.display="none",document.getElementById("show-won-card-screen").style.display="none",document.getElementById(e).style.display=["results-screen","plinko-screen","show-won-card-screen"].includes(e)?"flex":"block",e.replace("-screen",""),on(e),U(),qe(),e==="home-screen")console.log("Updating points display for home screen"),He();else if(e==="plinko-screen"){const t=await m.getItem("selectedCategory");t&&C[t]?ge(t,C[t]):(console.log("No saved category or invalid category for Plinko game"),ge("Simple Words",C["Simple Words"]))}else if(e==="card-reveal-screen"){const t=await m.getItem("selectedCategory");t&&C[t]?fe(t,C[t]):(console.log("No saved category or invalid category for Card Reveal game"),fe("Simple Words",C["Simple Words"]))}}async function Ce(){try{return C=await(await fetch("word-categories.json")).json(),C}catch(e){return console.error("Error fetching word categories:",e),null}}function tn(){document.querySelectorAll(".nav-item").forEach(t=>{t.addEventListener("click",()=>{const n=t.dataset.screen;console.log("Navigation clicked:",n),j(n)})})}async function nn(e){const t=document.getElementById("difficulty-dropdown").value;console.log(`Starting game with category: ${e}, difficulty: ${t}`),new Audio("game-sounds/lets-go.m4a").play(),await m.setItem("selectedCategory",e),await m.setItem("selectedDifficulty",t),j("game-screen"),Gt()}function on(e){document.querySelectorAll(".nav-item").forEach(n=>{n.dataset.screen===e?n.classList.add("selected"):n.classList.remove("selected")})}async function rn(){v=await m.getNumber("points",0)}async function le(e){console.log("Updating points. Current:",v,"Change:",e),v+=e,await m.setItem("points",v),console.log("New total points:",v),U()}function U(){console.log("Updating points display. Current total points:",v),document.querySelectorAll(".points-display span").forEach(t=>{t.textContent!==v.toString()&&(t.textContent=v)})}async function sn(){v=await m.getNumber("points",0),console.log("Initialized total points:",v),U()}function an(){document.body.addEventListener("contextmenu",function(e){if(e.target.tagName==="IMG")return e.preventDefault(),!1},{passive:!1})}async function ln(){try{await It(),await Ce(),await rn(),await He(),await sn(),tn(),an(),await he.hide(),console.log("App initialized successfully")}catch(e){console.error("Failed to initialize app:",e),await he.hide()}}document.addEventListener("DOMContentLoaded",async()=>{console.log("Capacitor version:",Y.getPlatform()),console.log("Preferences:",T),await he.show({showDuration:2e3,autoHide:!1}),await ln()});window.startGame=nn;window.revealBlock=function(e,t){Ye(e)};window.playLetterSound=function(e){nt(e)};window.checkImage=function(e,t){ot(e,t)};export{ee as I,Me as N,je as W};
